* { margin:0; padding:0; box-sizing:border-box; user-select:none; -webkit-tap-highlight-color:transparent; }

:root {
  --cosmic-primary: #ff6b35;
  --cosmic-secondary: #ff8c00;
  --cosmic-accent: #ffcc00;
  --cosmic-success: #ffaa00;
  --cosmic-error: #8b0000;
  --planet-crater: #150524;
  --planet-base: #3a1066;
  --planet-surface: #6b1cb0;
  --planet-glow: #b526ff;
  --planet-highlight: #f4d7ff;
  /* Rocket Fiery Palette - Season 1 */
  --rocket-shadow-deep: #2b0802;
  --rocket-shadow: #7a1503;
  --rocket-surface: #d63806;
  --rocket-highlight: #ff8c00;
  --rocket-glow: #ffebb5;
}

body {
  font-family: 'Exo 2', sans-serif;
  background: #0a0a1a;
  color: #fff;
  height: 100vh; width: 100vw;
  overflow: hidden;
  touch-action: manipulation;
}

.mobile-app { width: 100%; height: 100%; position: relative; }

/* Экраны */
.screen { display: flex; flex-direction: column; width: 100%; height: 100%; justify-content: center; align-items: center; }
.screen:not(.active) { display: none !important; }

/* Делаем экран относительным, чтобы канвас растянулся внутри него */
#startScreen { position: relative; }

/* Текст теперь с крутым огненным градиентом */
.title { 
  font-family: 'Orbitron', monospace; 
  font-size: 4rem; 
  margin-bottom: 5px; 
  background: linear-gradient(to right, #ff3333, #ff8c00, #ffcc00);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 0 25px rgba(255, 85, 0, 0.4); 
}

/* Огненно-оранжевый бейдж сезона */
.season-badge {
  font-family: 'Orbitron', monospace;
  font-weight: 900;
  font-size: 0.9rem;
  letter-spacing: 0.15em;
  color: #ffcc00; 
  text-transform: uppercase;
  background: rgba(255, 85, 0, 0.15);
  border: 1px solid rgba(255, 85, 0, 0.6);
  padding: 8px 16px;
  border-radius: 999px;
  margin-bottom: 15px;
  box-shadow: 0 0 15px rgba(255, 85, 0, 0.4);
  animation: pulse-badge 1.5s infinite alternate;
}

@keyframes pulse-badge {
  from { box-shadow: 0 0 10px rgba(255, 85, 0, 0.2); transform: scale(1); }
  to { box-shadow: 0 0 25px rgba(255, 85, 0, 0.7); transform: scale(1.05); }
}

/* Обновляем кнопку под новую палитру */
.btn {
  background: linear-gradient(135deg, #ff3333, #ff8c00);
  color: #fff; border: none; padding: 18px 40px; font-size: 1.2em; font-weight: 700;
  border-radius: 12px; cursor: pointer; font-family: 'Orbitron', monospace;
  box-shadow: 0 10px 20px rgba(255, 51, 51, 0.3); transition: transform 0.1s;
}
.btn:active { transform: scale(0.95); }

/* Игровое поле */
.fullscreen-game { position: fixed; inset: 0; background: #0a0a1a; transition: background 0.5s ease; box-sizing: border-box; }
.fullscreen-area { flex: 1; position: relative; width: 100%; overflow: hidden; }
.bg-canvas { position: absolute; inset: 0; z-index: 0; pointer-events: none; }
#playCanvas { position: absolute; inset: 0; z-index: 100; pointer-events: none; }

/* Warm-up overlay (3-2-1-START) */
.warmup-overlay {
  position: absolute; inset: 0; z-index: 500;
  display: flex; align-items: center; justify-content: center;
  background: rgba(5, 5, 20, 0.75);
  backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
  opacity: 1; transition: opacity 0.5s ease-out;
  pointer-events: auto;
}
.warmup-overlay.hiding { opacity: 0; }
.warmup-overlay.hidden { display: none !important; }
.warmup-countdown {
  font-family: 'Orbitron', monospace; font-weight: 900; font-size: clamp(4rem, 15vw, 8rem);
  color: #fff; text-align: center; line-height: 1;
  background: linear-gradient(to bottom, #ffcc00, #ff8c00);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 40px rgba(255, 140, 0, 0.6), 0 0 80px rgba(255, 204, 0, 0.4);
}
.warmup-countdown.warmup-tick { animation: warmup-pop 0.9s ease-out; }
@keyframes warmup-pop {
  0% { transform: scale(0.3); opacity: 0; }
  50% { transform: scale(1.15); }
  70% { transform: scale(0.95); }
  100% { transform: scale(1); opacity: 1; }
}

/* UI */
.minimal-stats-vertical { position: absolute; top: 15px; left: 15px; z-index: 200; display: flex; flex-direction: column; gap: 8px; }
.minimal-stat-vertical { background: rgba(26,10,10,.9); padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255, 107, 53, 0.7); display: flex; align-items: center; gap: 6px; min-width: 70px; }
.minimal-value { font-weight: 700; color: #ffcc00; font-family: 'Orbitron', monospace; }

/* Игровые объекты (ФИКС МОРГАНИЯ: добавлено top: 0) */
.rocket, .planet { position: absolute; top: 0; cursor: pointer; display: flex; align-items: center; justify-content: center; will-change: transform; transition: none; z-index: 10; }
.planet-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); font-weight: 800; color: #fff; font-family: 'Orbitron', monospace; font-size: 1.15em; background: rgba(21, 5, 36, 0.75); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid var(--planet-glow); box-shadow: 0 0 10px rgba(181, 38, 255, 0.3); padding: 6px 12px; border-radius: 50%; pointer-events: none; white-space: nowrap; z-index: 10; }

.planet { width: 85px; height: 85px; }
.planet .planet-svg-wrap { position: absolute; inset: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
.planet .planet-svg-wrap .entity-svg { position: absolute; inset: 0; width: 100%; height: 100%; }

.rocket { width: 85px; height: 85px; }
.rocket .entity-svg { position: absolute; inset: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; filter: drop-shadow(0 0 8px rgba(255, 140, 0, 0.4)); }
.rocket.selected { z-index: 15; }
.rocket.selected .entity-svg { filter: drop-shadow(0 0 15px var(--cosmic-accent)); }
.rocket-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); font-weight: 800; color: #ffffff; font-family: 'Orbitron', monospace; font-size: 1.15em; background: rgba(10, 10, 26, 0.75); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); border: 1px solid var(--cosmic-accent); box-shadow: 0 0 10px rgba(255, 204, 0, 0.3); padding: 6px 12px; border-radius: 8px; pointer-events: none; white-space: nowrap; z-index: 10; }

/* .planet size and .planet-svg-wrap are above; no solid background so SVG shows */

/* Эффекты ответов */
.correct { filter: drop-shadow(0 0 15px #ffaa00); }
.wrong { filter: drop-shadow(0 0 15px #8b0000); }

/* ЗАМОРОЗКА */
.bonus-ice { background: radial-gradient(circle at 30% 30%, #e0f7fa, #00bcd4); border: 2px solid #fff; box-shadow: 0 0 15px #00e5ff; font-size: 2.2em; border-radius: 50%; z-index: 20; }
.bonus-pulse { display: block; animation: pulse-inner 1s infinite alternate; }
@keyframes pulse-inner { from { transform: scale(1); text-shadow: 0 0 10px #fff; } to { transform: scale(1.2); text-shadow: 0 0 20px #00e5ff; } }
.timer-ice { color: #00f3ff !important; text-shadow: 0 0 10px #00f3ff, 0 0 20px #ffffff; position: relative; }
.timer-ice::after { content: '❄️'; position: absolute; top: -15px; right: -15px; font-size: 0.8em; animation: pulse-inner 1s infinite; }

/* Screen Shake */
@keyframes shake-s { 0%, 100% { transform: translate(0, 0); } 25% { transform: translate(-4px, 4px); } 50% { transform: translate(4px, -4px); } 75% { transform: translate(-4px, -4px); } }
@keyframes shake-h { 0%, 100% { transform: translate(0, 0); } 20% { transform: translate(-8px, 8px); } 40% { transform: translate(8px, -8px); } 60% { transform: translate(-8px, -8px); } 80% { transform: translate(8px, 8px); } }
.shake-s { animation: shake-s 0.25s linear; }
.shake-h { animation: shake-h 0.3s linear; }

/* Модалка */
.modal { position: fixed; inset: 0; background: rgba(5,5,16,.9); display: none; justify-content: center; align-items: center; z-index: 3000; }
.modal-content { background: linear-gradient(135deg, rgba(46,22,22,.95), rgba(36,16,16,.98)); padding: 30px; border-radius: 20px; border: 2px solid rgba(255, 107, 53, 0.8); text-align: center; }

.result-stats { margin: 20px 0; font-size: 1.5em; }
